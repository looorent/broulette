<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BiteRoulette - The Lazy Edition</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- tsParticles -->
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@500;700;900&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'fun-red': '#E85A4F',      /* Terracotta */
                        'fun-cream': '#FAF8F5',    /* Off-white */
                        'fun-dark': '#2C2A32',     /* Charcoal */
                        'fun-yellow': '#FFD166',   /* Pop Yellow */
                        'fun-green': '#06D6A0',    /* Pop Green */
                    },
                    fontFamily: {
                        'sans': ['DM Sans', 'sans-serif'],
                        'display': ['Space Grotesk', 'sans-serif'],
                    },
                    boxShadow: {
                        'hard': '4px 4px 0px 0px #2C2A32',
                        'hard-hover': '2px 2px 0px 0px #2C2A32',
                        'hard-white': '4px 4px 0px 0px #FAF8F5',
                    }
                }
            }
        }
    </script>

    <style>
        /* CORE LAYOUT FIXES */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent scrolling */
        }

        body {
            /* Complex Multi-Shape Gradient Background */
            background-color: #E85A4F; /* Fallback */
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255, 209, 102, 0.6) 0%, transparent 40%),
                radial-gradient(circle at 80% 20%, rgba(6, 214, 160, 0.5) 0%, transparent 40%),
                conic-gradient(from 45deg at 50% 50%, rgba(232, 90, 79, 0.2) 0deg, rgba(255, 209, 102, 0.2) 120deg, rgba(232, 90, 79, 0.2) 240deg),
                linear-gradient(135deg, #E85A4F 0%, #C93D32 100%);
            background-attachment: fixed;
            background-blend-mode: soft-light, soft-light, normal, normal;
            
            /* Typography defaults */
            font-family: 'DM Sans', sans-serif;
            color: #2C2A32;
        }

        /* --- Falling Animation --- */
        @keyframes fall {
            0% { transform: translateY(-20vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.12; } 
            90% { opacity: 0.12; }
            100% { transform: translateY(120vh) rotate(360deg); opacity: 0; }
        }

        .falling-item {
            position: absolute;
            top: -20vh;
            color: #FAF8F5; /* Cream color */
            pointer-events: none;
            z-index: 0;
            animation: fall linear infinite;
        }

        /* --- Transitions --- */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background-color: transparent;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: translateY(100%);
            z-index: 10;
        }

        .screen.active {
            transform: translateY(0);
        }

        .screen.prev {
            transform: translateY(-100%) scale(0.9);
            opacity: 0.5;
        }

        /* --- Slot Machine Animation for Step 3 --- */
        @keyframes slot-spin {
            0% { transform: translateY(0); }
            100% { transform: translateY(-500%); }
        }
        .slot-reel {
            animation: slot-spin 0.5s linear infinite;
        }

        /* Float Animation for Title */
        @keyframes float-text {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .animate-float { animation: float-text 3s ease-in-out infinite; }

        /* Updated Mega Pulse Animation */
        @keyframes pulse-mega {
            0% { transform: scale(0.9); opacity: 0.7; }
            100% { transform: scale(4); opacity: 0; }
        }
        .animate-pulse-fun {
            animation: pulse-mega 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
        }

        #rain-container {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

    </style>
</head>
<body>

    <!-- BACKGROUND ANIMATION CONTAINER -->
    <div id="rain-container"></div>

    <!-- GET HELP BUTTON (Fixed Position) -->
    <button onclick="alert('Help is coming! Just follow the big buttons for now.')" class="fixed top-5 right-5 z-50 bg-fun-cream text-fun-dark border-[3px] border-fun-dark rounded-full p-2 shadow-hard-hover hover:scale-110 active:scale-95 transition-transform group" title="Get Help">
        <i data-lucide="help-circle" class="w-6 h-6 group-hover:rotate-12 transition-transform"></i>
    </button>

    <!-- STEP 1: INTRO -->
    <!-- Changed justify-between to justify-center and reduced padding for better balance -->
    <div id="step-1" class="screen active p-6 justify-center items-center gap-12 z-20">
        
        <!-- Top Section: Big Text (Chaotic Layout) -->
        <div class="text-center relative animate-float">
            <!-- Adjusted text size for responsiveness -->
            <h1 class="font-display text-6xl md:text-7xl leading-[0.9] text-white drop-shadow-[5px_5px_0px_rgba(45,52,54,1)] tracking-tighter mb-4 flex flex-col items-center">
                <span class="transform -rotate-6 transition hover:rotate-0 duration-300">TOO</span>
                <span class="transform rotate-3 transition hover:rotate-0 duration-300 text-fun-yellow">LAZY</span>
                <span class="transform -rotate-2 transition hover:rotate-0 duration-300">TO</span>
                <span class="transform rotate-6 transition hover:rotate-0 duration-300">PICK?</span>
            </h1>
            <div class="inline-block bg-fun-dark text-fun-cream px-4 py-2 rounded-full transform -rotate-2 mt-4 shadow-hard-white">
                <p class="font-bold tracking-widest uppercase text-sm">We choose, you eat.</p>
            </div>
        </div>

        <!-- Bottom Section: Big Button -->
        <div class="relative w-48 h-48 flex justify-center items-center">
            <!-- Decorative circle behind with new mega pulse - Resized -->
            <div class="absolute w-48 h-48 bg-fun-cream/30 rounded-full animate-pulse-fun"></div>
            
            <!-- Button Resized: w-48 -> w-40 -->
            <button onclick="goToStep(2)" class="group relative w-40 h-40 bg-fun-cream rounded-full border-[5px] border-fun-dark shadow-hard transition-all duration-200 hover:translate-y-[2px] hover:shadow-hard-hover active:scale-95 flex flex-col items-center justify-center gap-2 z-20">
                <span class="font-sans font-black text-3xl lowercase text-fun-dark tracking-tight">feed me</span>
            </button>
        </div>
    </div>

    <!-- STEP 2: DETAILS -->
    <div id="step-2" class="screen p-6 z-30">
        <div class="flex-1 flex flex-col max-w-md mx-auto w-full pt-10">
            <h2 class="font-display text-5xl text-fun-cream mb-8 leading-none">THE<br>BASICS</h2>

            <div class="space-y-6">
                <!-- Location Input -->
                <div class="bg-fun-cream p-1 border-[4px] border-fun-dark shadow-hard rounded-2xl transform rotate-1 transition-transform focus-within:rotate-0">
                    <div class="flex items-center px-3">
                        <i data-lucide="map-pin" class="w-6 h-6 text-fun-red"></i>
                        <input type="text" id="loc-input" placeholder="Where are you?" class="w-full bg-transparent p-4 font-bold text-lg outline-none placeholder:text-fun-dark/40">
                    </div>
                </div>

                <!-- Time Picker -->
                <div>
                    <label class="text-fun-cream font-bold text-lg mb-2 block ml-1">When?</label>
                    <div class="grid grid-cols-2 gap-4">
                        <label class="cursor-pointer">
                            <input type="radio" name="time" class="peer sr-only" checked>
                            <div class="bg-white/20 border-4 border-transparent text-fun-cream rounded-xl p-4 text-center font-bold transition-all peer-checked:bg-fun-yellow peer-checked:text-fun-dark peer-checked:border-fun-dark peer-checked:shadow-hard hover:bg-white/30">
                                NOW
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="time" class="peer sr-only">
                            <div class="bg-white/20 border-4 border-transparent text-fun-cream rounded-xl p-4 text-center font-bold transition-all peer-checked:bg-fun-yellow peer-checked:text-fun-dark peer-checked:border-fun-dark peer-checked:shadow-hard hover:bg-white/30">
                                LATER
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Optional Filters Toggle -->
            <div class="mt-8">
                <button onclick="document.getElementById('filters-panel').classList.toggle('hidden')" class="text-fun-cream font-bold underline decoration-2 underline-offset-4 hover:text-fun-yellow transition-colors">
                    + Add boring filters
                </button>
                
                <div id="filters-panel" class="hidden mt-4 bg-fun-dark/10 p-4 rounded-xl border-2 border-fun-dark/10">
                    <div class="flex justify-between text-fun-cream font-bold text-sm mb-2">
                        <span>Price</span>
                        <span>Distance</span>
                    </div>
                    <div class="flex gap-2 mb-4">
                        <div class="h-10 flex-1 bg-fun-cream rounded-lg border-2 border-fun-dark flex items-center justify-center font-bold cursor-pointer hover:bg-fun-yellow">$</div>
                        <div class="h-10 flex-1 bg-fun-cream rounded-lg border-2 border-fun-dark flex items-center justify-center font-bold cursor-pointer hover:bg-fun-yellow">$$</div>
                        <div class="h-10 flex-1 bg-fun-cream rounded-lg border-2 border-fun-dark flex items-center justify-center font-bold cursor-pointer hover:bg-fun-yellow">$$$</div>
                    </div>
                </div>
            </div>

            <div class="mt-auto pb-8">
                <button onclick="startSearch()" class="w-full bg-fun-green text-fun-dark border-[4px] border-fun-dark rounded-xl py-4 font-display text-2xl uppercase shadow-hard hover:shadow-hard-hover hover:translate-y-[2px] transition-all active:scale-95 flex items-center justify-center gap-2">
                    <span>Feed Me</span>
                    <i data-lucide="arrow-right" class="w-6 h-6 stroke-[3px]"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 3: LOADER (SLOT MACHINE) -->
    <div id="step-3" class="screen p-6 z-40 items-center justify-center">
        <div class="bg-fun-dark p-6 rounded-3xl border-[6px] border-fun-yellow shadow-hard-white w-full max-w-sm relative">
            <!-- Slot Window -->
            <div class="bg-white h-40 rounded-xl mb-6 overflow-hidden border-4 border-black relative flex items-center justify-center gap-2 shadow-[inset_0_0_20px_rgba(0,0,0,0.5)]">
                
                <!-- Reel 1 -->
                <div class="w-1/3 h-full overflow-hidden relative border-r-2 border-gray-300">
                    <div class="slot-reel flex flex-col items-center gap-8 pt-4">
                        <i data-lucide="pizza" class="w-16 h-16 text-fun-red"></i>
                        <i data-lucide="coffee" class="w-16 h-16 text-fun-dark"></i>
                        <i data-lucide="croissant" class="w-16 h-16 text-fun-yellow"></i>
                        <i data-lucide="pizza" class="w-16 h-16 text-fun-red"></i> <!-- Repeat for loop -->
                    </div>
                </div>
                <!-- Reel 2 -->
                <div class="w-1/3 h-full overflow-hidden relative border-r-2 border-gray-300">
                    <div class="slot-reel flex flex-col items-center gap-8 pt-4" style="animation-duration: 0.3s;">
                        <i data-lucide="sandwich" class="w-16 h-16 text-fun-green"></i>
                        <i data-lucide="beer" class="w-16 h-16 text-fun-yellow"></i>
                        <i data-lucide="soup" class="w-16 h-16 text-fun-red"></i>
                        <i data-lucide="sandwich" class="w-16 h-16 text-fun-green"></i>
                    </div>
                </div>
                <!-- Reel 3 -->
                <div class="w-1/3 h-full overflow-hidden relative">
                    <div class="slot-reel flex flex-col items-center gap-8 pt-4" style="animation-duration: 0.6s;">
                        <i data-lucide="candy" class="w-16 h-16 text-fun-purple"></i>
                        <i data-lucide="donut" class="w-16 h-16 text-fun-red"></i>
                        <i data-lucide="ice-cream" class="w-16 h-16 text-fun-blue"></i>
                        <i data-lucide="candy" class="w-16 h-16 text-fun-purple"></i>
                    </div>
                </div>
                
                <!-- Shine overlay -->
                <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/20 pointer-events-none"></div>
                <div class="absolute top-1/2 left-0 right-0 h-1 bg-red-500/50 z-10"></div>
            </div>

            <h3 class="text-fun-cream text-center font-display text-2xl uppercase animate-pulse">Consulting Fate...</h3>
        </div>
    </div>

    <!-- STEP 4: RESULT -->
    <div id="step-4" class="screen p-6 z-50">
        <div class="flex-1 flex flex-col max-w-md mx-auto w-full pt-10 h-full">
            
            <!-- Confetti Header -->
            <div class="text-center mb-6">
                <span class="bg-fun-yellow text-fun-dark px-4 py-1 rounded-full font-bold text-sm border-2 border-fun-dark shadow-hard-hover">IT'S A MATCH!</span>
            </div>

            <!-- Card -->
            <div class="bg-fun-cream rounded-3xl border-[4px] border-fun-dark shadow-hard overflow-hidden flex-1 max-h-[60vh] flex flex-col transform rotate-1">
                <div class="h-1/2 bg-gray-200 relative border-b-[4px] border-fun-dark">
                    <img id="res-img" src="" class="w-full h-full object-cover">
                    <div class="absolute bottom-4 right-4 bg-white border-2 border-fun-dark px-3 py-1 rounded-lg flex items-center gap-1 shadow-hard-hover">
                        <i data-lucide="star" class="w-4 h-4 fill-fun-yellow text-fun-yellow"></i>
                        <span id="res-rating" class="font-bold">4.8</span>
                    </div>
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <h2 id="res-name" class="font-display text-4xl leading-none mb-3">The Burger Joint</h2>
                    <p id="res-desc" class="font-sans font-bold text-gray-500 mb-4 line-clamp-3">Juicy burgers that will make you forget about your diet immediately.</p>
                    <div class="mt-auto flex items-center gap-2 text-fun-red font-bold">
                        <i data-lucide="map-pin" class="w-5 h-5"></i>
                        <span id="res-addr">123 Tasty Lane</span>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="mt-6 flex gap-3 pb-6">
                <button onclick="retrySearch()" class="aspect-square h-16 bg-fun-cream border-[3px] border-fun-dark rounded-xl flex items-center justify-center hover:bg-gray-100 shadow-hard-hover">
                    <i data-lucide="refresh-cw" class="w-6 h-6"></i>
                </button>
                <button class="flex-1 bg-fun-dark text-fun-cream border-[3px] border-fun-dark rounded-xl font-display text-xl uppercase flex items-center justify-center gap-2 hover:bg-gray-800 shadow-hard-white">
                    <span>Navigate</span>
                    <i data-lucide="navigation" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- Vectorized SVGs (as Data URIs for tsparticles) ---
        // These are the "better" icons vectorized with thick strokes
        const iconColor = "%232C2A32"; // Hex #2C2A32 encoded
        
        const pizzaSvg = `data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C7 2 3 5 3 5L12 22L21 5C21 5 17 2 12 2Z" /><path d="M3 5C3 5 7 8 12 8C17 8 21 5 21 5" /><circle cx="12" cy="13" r="2" /><circle cx="9" cy="9" r="1" /><circle cx="15" cy="10" r="1" /></svg>`;
        
        const sausageSvg = `data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M18 8C19.6569 8 21 9.34315 21 11C21 12.6569 19.6569 14 18 14H6C4.34315 14 3 12.6569 3 11C3 9.34315 4.34315 8 6 8" /><path d="M6 8C5 8 4 10 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 10 19 8 18 8" /><path d="M6 8C7 10 12 11 18 8" /><path d="M9 13L9 16" /><path d="M12 14L12 17" /><path d="M15 13L15 16" /><path d="M7 5C7 5 8 3 8 2" /><path d="M12 5C12 5 13 3 13 2" /><path d="M17 5C17 5 18 3 18 2" /></svg>`;
        
        const hotdogSvg = `data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M4 11C4 11 4 15 5 17C6 19 8 20 12 20C16 20 18 19 19 17C20 15 20 11 20 11" /><path d="M2 10C2 8.5 3 7 4 7H20C21 7 22 8.5 22 10C22 11.5 20 13 19 13H5C4 13 2 11.5 2 10Z" /><path d="M5 10C6 9 7 9 8 10C9 11 10 11 11 10C12 9 13 9 14 10C15 11 16 11 17 10C18 9 19 9 20 10" /></svg>`;
        
        const sushiSvg = `data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="10" width="16" height="10" rx="4" /><path d="M2 8C2 5.5 5 4 12 4C19 4 22 5.5 22 8C22 10.5 19 12 12 12C5 12 2 10.5 2 8Z" /><path d="M7 4C7 4 6 8 6 12" /><path d="M12 4C12 4 11 8 11 12" /><path d="M17 4C17 4 16 8 16 12" /></svg>`;
        
        const forkSvg = `data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12 22V10" /><path d="M8 2V7C8 9 10 10 12 10C14 10 16 9 16 7V2" /><path d="M12 2V7" /></svg>`;
        
        const burgerSvg = `data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M4 10c0-3.3 3.6-6 8-6s8 2.7 8 6H4z"/><rect x="4" y="14" width="16" height="4" rx="2"/><path d="M4 18h16v2c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2v-2z"/><path d="M4 12h16"/></svg>`;

        // --- Router Logic ---
        function goToStep(step) {
            // Manage classes for transition
            const current = document.querySelector('.screen.active');
            if (current) {
                current.classList.remove('active');
                current.classList.add('prev');
            }

            const target = document.getElementById(`step-${step}`);
            target.classList.remove('prev');
            target.classList.add('active');

            // Initialize icons for new visibility
            setTimeout(() => lucide.createIcons(), 100);
        }

        function startSearch() {
            goToStep(3);
            setTimeout(() => {
                showResult();
            }, 3000); // 3 seconds of slot machine
        }

        function showResult() {
            // Mock Data
            const res = {
                name: "Taco Loco",
                img: "https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=600&q=80",
                rating: "4.9",
                desc: "Authentic street tacos served from a truck that looks like a spaceship.",
                addr: "55 Space Blvd"
            };

            document.getElementById('res-name').innerText = res.name;
            document.getElementById('res-img').src = res.img;
            document.getElementById('res-rating').innerText = res.rating;
            document.getElementById('res-desc').innerText = res.desc;
            document.getElementById('res-addr').innerText = res.addr;

            goToStep(4);
        }

        function retrySearch() {
            // Reset state slightly for visual flair
            document.getElementById('step-4').classList.remove('active');
            startSearch();
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            
            // tsParticles Configuration
            tsParticles.load("rain-container", {
                particles: {
                    number: {
                        value: 8, // Reduced density further for cleaner look
                    },
                    shape: {
                        type: "image",
                        image: [
                            { src: pizzaSvg, width: 100, height: 100 },
                            { src: sausageSvg, width: 100, height: 100 },
                            { src: hotdogSvg, width: 100, height: 100 },
                            { src: sushiSvg, width: 100, height: 100 },
                            { src: forkSvg, width: 100, height: 100 },
                            { src: burgerSvg, width: 100, height: 100 }
                        ]
                    },
                    opacity: {
                        value: 0.12, // Reduced opacity for subtler look
                        random: false,
                    },
                    size: {
                        value: { min: 40, max: 80 }, // Smaller size range
                        random: true,
                    },
                    move: {
                        enable: true,
                        speed: 3, // Slow fall
                        direction: "bottom",
                        random: false,
                        straight: false,
                        outModes: {
                            default: "out"
                        },
                    },
                    rotate: {
                        value: 0,
                        random: true,
                        direction: "clockwise",
                        animation: {
                            enable: true,
                            speed: 5,
                            sync: false
                        }
                    }
                },
                interactivity: {
                    detectsOn: "canvas",
                    events: {
                        resize: true
                    }
                },
                detectRetina: true
            });
        });

    </script>
</body>
</html>